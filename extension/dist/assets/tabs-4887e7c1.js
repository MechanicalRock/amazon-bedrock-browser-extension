var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U={exports:{}};const se=e=>typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?()=>{const n=crypto.getRandomValues(new Uint8Array(1))[0];return(n>=e?n%e:n).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),J=(e=7,n=!1)=>Array.from({length:e},se(n?16:36)).join("");U.exports=J;U.exports.default=J;var ne=U.exports;const F=q(ne);var be=()=>`uid::${F(7)}`,G=(e,n=["endpointName","fingerprint"])=>typeof e=="object"&&e!==null&&n.every(i=>i in e),pe=e=>{if(!G(e))throw new TypeError("Invalid connection args");return JSON.stringify(e)},he=e=>{try{const n=JSON.parse(e);return G(n)?n:null}catch{return null}},we=()=>{let e=[];return{add:(...n)=>{e=[...e,...n]},remove:n=>{e=typeof n=="string"?e.filter(i=>i.message.transactionId!==n):e.filter(i=>!n.includes(i))},entries:()=>e}},ye=class{static toBackground(e,n){return e.postMessage(n)}static toExtensionContext(e,n){return e.postMessage(n)}},te=Object.defineProperty,ae=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,V=(e,n,i)=>n in e?te(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,H=(e,n)=>{for(var i in n||(n={}))ie.call(n,i)&&V(e,i,n[i]);if(z)for(var i of z(n))oe.call(n,i)&&V(e,i,n[i]);return e},K=(e,n)=>ae(e,ge(n)),me=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,Y=e=>{const[,n,i,p]=e.match(me)||[];return{context:n,tabId:+i,frameId:p?+p:void 0}},ve=({context:e,tabId:n,frameId:i})=>["background","popup","options"].includes(e)?e:`${e}@${n}${i?`.${i}`:""}`;const le=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],W=Symbol(".toJSON was called"),Ae=e=>{e[W]=!0;const n=e.toJSON();return delete e[W],n},Q=({from:e,seen:n,to_:i,forceEnumerable:p,maxDepth:C,depth:h})=>{const c=i||(Array.isArray(e)?[]:{});if(n.push(e),h>=C)return c;if(typeof e.toJSON=="function"&&e[W]!==!0)return Ae(e);for(const[m,u]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(u)){c[m]="[object Buffer]";continue}if(u!==null&&typeof u=="object"&&typeof u.pipe=="function"){c[m]="[object Stream]";continue}if(typeof u!="function"){if(!u||typeof u!="object"){c[m]=u;continue}if(!n.includes(e[m])){h++,c[m]=Q({from:e[m],seen:[...n],forceEnumerable:p,maxDepth:C,depth:h});continue}c[m]="[Circular]"}}for(const{property:m,enumerable:u}of le)typeof e[m]=="string"&&Object.defineProperty(c,m,{value:e[m],enumerable:p?!0:u,configurable:!0,writable:!0});return c};function ce(e,n={}){const{maxDepth:i=Number.POSITIVE_INFINITY}=n;return typeof e=="object"&&e!==null?Q({from:e,seen:[],forceEnumerable:!0,maxDepth:i,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}let X=()=>({events:{},emit(e,...n){(this.events[e]||[]).forEach(i=>i(...n))},on(e,n){return(this.events[e]=this.events[e]||[]).push(n),()=>this.events[e]=(this.events[e]||[]).filter(i=>i!==n)}});var ke=(e,n,i)=>{const p=F(),C=new Map,h=new Map,c=m=>{if(m.destination.context===e&&!m.destination.frameId&&!m.destination.tabId){i==null||i(m);const{transactionId:u,messageID:v,messageType:k}=m,S=()=>{const w=C.get(u);if(w){const{err:f,data:E}=m;if(f){const _=f,I=self[_.name],$=new(typeof I=="function"?I:Error)(_.message);for(const O in _)$[O]=_[O];w.reject($)}else w.resolve(E);C.delete(u)}},P=async()=>{let w,f,E=!1;try{const _=h.get(v);if(typeof _=="function")w=await _({sender:m.origin,id:v,data:m.data,timestamp:m.timestamp});else throw E=!0,new Error(`[webext-bridge] No handler registered in '${e}' to accept messages with id '${v}'`)}catch(_){f=_}finally{if(f&&(m.err=ce(f)),c(K(H({},m),{messageType:"reply",data:w,origin:{context:e,tabId:null},destination:m.origin,hops:[]})),f&&!E)throw w}};switch(k){case"reply":return S();case"message":return P()}}return m.hops.push(`${e}::${p}`),n(m)};return{handleMessage:c,endTransaction:m=>{const u=C.get(m);u==null||u.reject("Transaction was ended before it could complete"),C.delete(m)},sendMessage:(m,u,v="background")=>{const k=typeof v=="string"?Y(v):v,S="Bridge#sendMessage ->";if(!k.context)throw new TypeError(`${S} Destination must be any one of known destinations`);return new Promise((P,w)=>{const f={messageID:m,data:u,destination:k,messageType:"message",transactionId:F(),origin:{context:e,tabId:null},hops:[],timestamp:Date.now()};C.set(f.transactionId,{resolve:P,reject:w});try{c(f)}catch(E){C.delete(f.transactionId),w(E)}})},onMessage:(m,u)=>(h.set(m,u),()=>h.delete(m))}},R=class{constructor(e,n){this.endpointRuntime=e,this.streamInfo=n,this.emitter=X(),this.isClosed=!1,this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},R.initDone||(e.onMessage("__crx_bridge_stream_transfer__",i=>{const{streamId:p,streamTransfer:C,action:h}=i.data,c=R.openStreams.get(p);c&&!c.isClosed&&(h==="transfer"&&c.emitter.emit("message",C),h==="close"&&(R.openStreams.delete(p),c.handleStreamClose()))}),R.initDone=!0),R.openStreams.set(this.streamInfo.streamId,this)}get info(){return this.streamInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:e,action:"transfer"},this.streamInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:null,action:"close"},this.streamInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,n){const i=this.emitter.on(e,n);return Object.assign(i,{dispose:i,close:i})}},B=R;B.initDone=!1;B.openStreams=new Map;var Ce=e=>{const n=new Map,i=new Map,p=X();e.onMessage("__crx_bridge_stream_open__",c=>new Promise(m=>{const{sender:u,data:v}=c,{channel:k}=v;let S=!1,P=()=>{};const w=()=>{const f=i.get(k);typeof f=="function"?(f(new B(e,K(H({},v),{endpoint:u}))),S&&P(),m(!0)):S||(S=!0,P=p.on("did-change-stream-callbacks",w))};w()}));async function C(c,m){if(n.has(c))throw new Error("webext-bridge: A Stream is already open at this channel");const u=typeof m=="string"?Y(m):m,v={streamId:F(),channel:c,endpoint:u},k=new B(e,v);return k.onClose(()=>n.delete(c)),await e.sendMessage("__crx_bridge_stream_open__",v,u),n.set(c,k),k}function h(c,m){if(i.has(c))throw new Error("webext-bridge: This channel has already been claimed. Stream allows only one-on-one communication");i.set(c,m),p.emit("did-change-stream-callbacks")}return{openStream:C,onOpenStreamChannel:h}},ee={exports:{}};(function(e,n){(function(i,p){p(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Z,function(i){if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const p="The message port closed before a response was received.",C="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",h=c=>{const m={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(m).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class u extends WeakMap{constructor(s,o=void 0){super(o),this.createItem=s}get(s){return this.has(s)||this.set(s,this.createItem(s)),super.get(s)}}const v=r=>r&&typeof r=="object"&&typeof r.then=="function",k=(r,s)=>(...o)=>{c.runtime.lastError?r.reject(new Error(c.runtime.lastError.message)):s.singleCallbackArg||o.length<=1&&s.singleCallbackArg!==!1?r.resolve(o[0]):r.resolve(o)},S=r=>r==1?"argument":"arguments",P=(r,s)=>function(A,...x){if(x.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${S(s.minArgs)} for ${r}(), got ${x.length}`);if(x.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${S(s.maxArgs)} for ${r}(), got ${x.length}`);return new Promise((l,d)=>{if(s.fallbackToNoCallback)try{A[r](...x,k({resolve:l,reject:d},s))}catch(t){console.warn(`${r} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,t),A[r](...x),s.fallbackToNoCallback=!1,s.noCallback=!0,l()}else s.noCallback?(A[r](...x),l()):A[r](...x,k({resolve:l,reject:d},s))})},w=(r,s,o)=>new Proxy(s,{apply(A,x,l){return o.call(x,r,...l)}});let f=Function.call.bind(Object.prototype.hasOwnProperty);const E=(r,s={},o={})=>{let A=Object.create(null),x={has(d,t){return t in r||t in A},get(d,t,y){if(t in A)return A[t];if(!(t in r))return;let b=r[t];if(typeof b=="function")if(typeof s[t]=="function")b=w(r,r[t],s[t]);else if(f(o,t)){let T=P(t,o[t]);b=w(r,r[t],T)}else b=b.bind(r);else if(typeof b=="object"&&b!==null&&(f(s,t)||f(o,t)))b=E(b,s[t],o[t]);else if(f(o,"*"))b=E(b,s[t],o["*"]);else return Object.defineProperty(A,t,{configurable:!0,enumerable:!0,get(){return r[t]},set(T){r[t]=T}}),b;return A[t]=b,b},set(d,t,y,b){return t in A?A[t]=y:r[t]=y,!0},defineProperty(d,t,y){return Reflect.defineProperty(A,t,y)},deleteProperty(d,t){return Reflect.deleteProperty(A,t)}},l=Object.create(r);return new Proxy(l,x)},_=r=>({addListener(s,o,...A){s.addListener(r.get(o),...A)},hasListener(s,o){return s.hasListener(r.get(o))},removeListener(s,o){s.removeListener(r.get(o))}}),I=new u(r=>typeof r!="function"?r:function(o){const A=E(o,{},{getContent:{minArgs:0,maxArgs:0}});r(A)});let $=!1;const O=new u(r=>typeof r!="function"?r:function(o,A,x){let l=!1,d,t=new Promise(N=>{d=function(M){$||(console.warn(C,new Error().stack),$=!0),l=!0,N(M)}}),y;try{y=r(o,A,d)}catch(N){y=Promise.reject(N)}const b=y!==!0&&v(y);if(y!==!0&&!b&&!l)return!1;const T=N=>{N.then(M=>{x(M)},M=>{let D;M&&(M instanceof Error||typeof M.message=="string")?D=M.message:D="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:D})}).catch(M=>{console.error("Failed to send onMessage rejected reply",M)})};return T(b?y:t),!0}),L=({reject:r,resolve:s},o)=>{c.runtime.lastError?c.runtime.lastError.message===p?s():r(new Error(c.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?r(new Error(o.message)):s(o)},j=(r,s,o,...A)=>{if(A.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${S(s.minArgs)} for ${r}(), got ${A.length}`);if(A.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${S(s.maxArgs)} for ${r}(), got ${A.length}`);return new Promise((x,l)=>{const d=L.bind(null,{resolve:x,reject:l});A.push(d),o.sendMessage(...A)})},a={devtools:{network:{onRequestFinished:_(I)}},runtime:{onMessage:_(O),onMessageExternal:_(O),sendMessage:j.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:j.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},g={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return m.privacy={network:{"*":g},services:{"*":g},websites:{"*":g}},E(c,a,m)};i.exports=h(chrome)}else i.exports=globalThis.browser})})(ee);var ue=ee.exports;const Te=q(ue);var re={exports:{}};(function(e,n){(function(i,p){p(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Z,function(i){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)i.exports=globalThis.browser;else{const p="The message port closed before a response was received.",C=h=>{const c={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(c).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class m extends WeakMap{constructor(g,r=void 0){super(r),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const u=a=>a&&typeof a=="object"&&typeof a.then=="function",v=(a,g)=>(...r)=>{h.runtime.lastError?a.reject(new Error(h.runtime.lastError.message)):g.singleCallbackArg||r.length<=1&&g.singleCallbackArg!==!1?a.resolve(r[0]):a.resolve(r)},k=a=>a==1?"argument":"arguments",S=(a,g)=>function(s,...o){if(o.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${k(g.minArgs)} for ${a}(), got ${o.length}`);if(o.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${k(g.maxArgs)} for ${a}(), got ${o.length}`);return new Promise((A,x)=>{if(g.fallbackToNoCallback)try{s[a](...o,v({resolve:A,reject:x},g))}catch(l){console.warn(`${a} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,l),s[a](...o),g.fallbackToNoCallback=!1,g.noCallback=!0,A()}else g.noCallback?(s[a](...o),A()):s[a](...o,v({resolve:A,reject:x},g))})},P=(a,g,r)=>new Proxy(g,{apply(s,o,A){return r.call(o,a,...A)}});let w=Function.call.bind(Object.prototype.hasOwnProperty);const f=(a,g={},r={})=>{let s=Object.create(null),o={has(x,l){return l in a||l in s},get(x,l,d){if(l in s)return s[l];if(!(l in a))return;let t=a[l];if(typeof t=="function")if(typeof g[l]=="function")t=P(a,a[l],g[l]);else if(w(r,l)){let y=S(l,r[l]);t=P(a,a[l],y)}else t=t.bind(a);else if(typeof t=="object"&&t!==null&&(w(g,l)||w(r,l)))t=f(t,g[l],r[l]);else if(w(r,"*"))t=f(t,g[l],r["*"]);else return Object.defineProperty(s,l,{configurable:!0,enumerable:!0,get(){return a[l]},set(y){a[l]=y}}),t;return s[l]=t,t},set(x,l,d,t){return l in s?s[l]=d:a[l]=d,!0},defineProperty(x,l,d){return Reflect.defineProperty(s,l,d)},deleteProperty(x,l){return Reflect.deleteProperty(s,l)}},A=Object.create(a);return new Proxy(A,o)},E=a=>({addListener(g,r,...s){g.addListener(a.get(r),...s)},hasListener(g,r){return g.hasListener(a.get(r))},removeListener(g,r){g.removeListener(a.get(r))}}),_=new m(a=>typeof a!="function"?a:function(r){const s=f(r,{},{getContent:{minArgs:0,maxArgs:0}});a(s)}),I=new m(a=>typeof a!="function"?a:function(r,s,o){let A=!1,x,l=new Promise(b=>{x=function(T){A=!0,b(T)}}),d;try{d=a(r,s,x)}catch(b){d=Promise.reject(b)}const t=d!==!0&&u(d);if(d!==!0&&!t&&!A)return!1;const y=b=>{b.then(T=>{o(T)},T=>{let N;T&&(T instanceof Error||typeof T.message=="string")?N=T.message:N="An unexpected error occurred",o({__mozWebExtensionPolyfillReject__:!0,message:N})}).catch(T=>{console.error("Failed to send onMessage rejected reply",T)})};return y(t?d:l),!0}),$=({reject:a,resolve:g},r)=>{h.runtime.lastError?h.runtime.lastError.message===p?g():a(new Error(h.runtime.lastError.message)):r&&r.__mozWebExtensionPolyfillReject__?a(new Error(r.message)):g(r)},O=(a,g,r,...s)=>{if(s.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${k(g.minArgs)} for ${a}(), got ${s.length}`);if(s.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${k(g.maxArgs)} for ${a}(), got ${s.length}`);return new Promise((o,A)=>{const x=$.bind(null,{resolve:o,reject:A});s.push(x),r.sendMessage(...s)})},L={devtools:{network:{onRequestFinished:E(_)}},runtime:{onMessage:E(I),onMessageExternal:E(I),sendMessage:O.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:O.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},j={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return c.privacy={network:{"*":j},services:{"*":j},websites:{"*":j}},f(h,L,c)};i.exports=C(chrome)}})})(re);var xe=re.exports;const de=q(xe);async function Ee(){var e;return((e=await fe())==null?void 0:e.id)??0}async function fe(){const e={active:!0,currentWindow:!0},[n]=await de.tabs.query(e);return n}export{ye as P,H as _,ke as a,Te as b,be as c,he as d,Ce as e,ve as f,we as g,K as h,de as i,Ee as j,pe as k,Y as p};
